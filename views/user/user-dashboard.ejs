<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>KA-MARI</title>
<script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdn.tailwindcss.com"></script>
<script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
<script src="/js/user/user-dashboard.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    .simarin-text {
      font-family: 'Bebas Neue', sans-serif;
      letter-spacing: 0.2rem;
    }
    .program-text {
      font-family: 'Poppins', sans-serif;
    }
    .service-card {
      transition: all 0.3s ease;
      border-bottom: 4px solid transparent;
    }
    .service-card:hover {
      transform: translateY(-5px);
      border-bottom-color: #f59e0b;
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>
<body class="bg-gray-50">

<!-- Navigation -->
<nav id="mainNav" class="bg-transparent  text-white fixed top-0 w-full z-50 transition-transform duration-300">
    <div class="max-w-6xl mx-auto px-4 py-3 flex justify-between items-center">
      
      <!-- Kiri: Logo + SIMARIN -->
      <div class="flex items-center space-x-3">
        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhVlnwerlS3bGvBZeB4BNCQnl1bHvwBAkKO3NY2yf0isvrN2egSPM_VT7rkEV3lJBYXaFmJvprDlU5Xr2kZTK564YnUhX_SWuPmRYiaDoYItCcFhhnBrf3QcdJ-qNn31JV5Zfgaoz7fWIViBz6KwvnGp39roEqCWOI6m8lbuBtSzYe9RHFq-8WAVA/s3000/Kementerian%20Kelautan%20dan%20Perikanan%20(KKP)%20Republik%20Indonesia.png" alt="Logo SIMARIN" class="h-12 w-auto" />
        <span class="simarin-text text-4xl text-white">KA-MARI</span>
      </div>
      
      <!-- Kanan: Menu Navigasi -->
      <div class="flex space-x-8">
          <a href="/user/dashboard" class="text-white font-semibold py-2 text-xl">Beranda</a>

          <!-- Layanan dengan dropdown -->
          <div x-data="{ open: false }" class="relative inline-flex items-center">
            <button @click="open = !open" class="text-white font-semibold py-2 text-xl focus:outline-none">
              Layanan
            </button>
            <div x-show="open" @click.away="open = false"
                 class="absolute top-full mt-2 w-40 bg-white rounded shadow-lg py-2 z-50"
                 x-transition>
              <a href="/user/daftar-magang" class="flex items-center gap-2 px-4 py-2 text-gray-800 hover:bg-gray-100">
                Daftar Magang
                <% if (isRegistered) { %>  
             <a href="/user/SKM" class="flex items-center gap-2 px-4 py-2 text-gray-800 hover:bg-gray-100">
                 SKM
                 <% } %>
              </a>
            </div>
          </div>
    
          <!-- Kontak dengan dropdown -->
          <div x-data="{ open: false }" class="relative inline-flex items-center">
            <button @click="open = !open" class="text-white font-semibold py-2 text-xl focus:outline-none">
              Kontak
            </button>
            <div x-show="open" @click.away="open = false"
                 class="absolute top-full mt-2 w-40 bg-white rounded shadow-lg py-2 z-50"
                 x-transition>
                 <a href="https://www.instagram.com/bppsdm_brpbatpp_bogor" target="_blank"
                 class="flex items-center gap-2 px-4 py-2 text-gray-800 hover:bg-gray-100">
                <!-- Ikon Instagram -->
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                     stroke-width="1.5" stroke="currentColor"
                     class="w-5 h-5 text-pink-600">
                  <path stroke-linecap="round" stroke-linejoin="round"
                        d="M2.25 6.75C2.25 4.679 3.929 3 6 3h12c2.071 0 3.75 1.679 3.75 3.75v12c0 2.071-1.679 3.75-3.75 3.75H6A3.75 3.75 0 0 1 2.25 18.75v-12zM16.5 10.5a4.5 4.5 0 1 0-9 0 4.5 4.5 0 0 0 9 0zM17.25 6.75h.008v.008h-.008V6.75z"/>
                </svg>
                <span class="text-base font-semibold">instagram</span>
              </a>
              
            </div>
          </div>
        
          <div class="relative inline-block text-left" x-data="{ open: false }">
            <!-- Tombol Hamburger -->
            <button @click="open = !open" class="p-2 text-white hover:text-blue-600 focus:outline-none">
              <svg class="w-7 h-7" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
              </svg>
            </button>
      
              <!-- Dropdown Menu --> 
            <div x-show="open" @click.outside="open = false"
                 x-transition
                 class="absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50">
                 <a href="/user/profil" class="flex items-center px-4 py-2 text-base text-gray-700 hover:bg-gray-100">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A9 9 0 1112 21v-6.063a3 3 0 100-6V3a9 9 0 00-6.879 14.804z" />
                  </svg>
                  Profil
                </a> 
              <button onclick="confirmLogout()" class="block w-full text-left px-4 py-2 text-red-600 hover:bg-gray-100">
                Logout
              </button>
              
              </form>
            </div>
          </div>
        </div>
     </nav>
     <div 
     x-data="popupSpeaker(true)"
     x-show="open"
     @click.outside="close()"
     :class="bounce ? 'animate-bounce' : ''"
     class="fixed bottom-6 right-6 z-[9999] flex items-center space-x-4 bg-yellow-200/90 backdrop-blur-md p-4 rounded-2xl shadow-2xl max-w-sm transition-all duration-500 cursor-pointer"
     x-transition:enter="transform transition ease-out duration-500"
     x-transition:enter-start="opacity-0 translate-y-10 scale-90"
     x-transition:enter-end="opacity-100 translate-y-0 scale-100"
     x-transition:leave="transform transition ease-in duration-300"
     x-transition:leave-start="opacity-100 translate-y-0 scale-100"
     x-transition:leave-end="opacity-0 translate-y-10 scale-90"
   >
     <!-- Icon Speaker -->
     <svg class="w-10 h-10 text-yellow-600 animate-pulse" fill="none" stroke="currentColor" stroke-width="2"
       viewBox="0 0 24 24">
       <path stroke-linecap="round" stroke-linejoin="round"
         d="M15 8a3 3 0 013 3v2a3 3 0 01-3 3M19 8l3-3M19 16l3 3M5 10v4H2l5 4V6l-5 4h3z" />
     </svg>
   
     <div class="flex-1">
       <h4 class="font-bold text-gray-800">Upload Surat Permohonan</h4>
       <p class="text-gray-700 text-sm">
         Hallo friend üëã. Upload surat permohonanmu sekarang, dan mari mulai petualangan magangmu!
       </p>
       <button 
         @click="suratPermohonanCard()"
         class="mt-2 bg-yellow-600 hover:bg-yellow-700 text-white font-semibold px-4 py-2 rounded shadow-md transition-all">
         Ke Form Upload
       </button>
     </div>
   
     <button @click="close()" class="text-gray-600 hover:text-gray-800 font-bold text-xl">&times;</button>
   </div>
   
   <script>
   function popupSpeaker(show = true) {
     return {
       open: show,
       bounce: true,
       clicked: false,
       init() {
         // popup otomatis muncul setelah delay
         this.open = show;
       },
       close() {
         this.open = false;
       },
       suratPermohonanCard() {
         this.clicked = true; // hentikan animasi
         document.getElementById("suratPermohonanCard").scrollIntoView({ behavior: 'smooth', block: 'center' });
         this.close();
       }
     }
   }
   </script>
   

<!-- Hero Section -->
<div class="relative w-full h-screen overflow-hidden"
x-data="{
  current: 0,
  images: [
    '/images/ikan.jpg',
    '/images/kita.jpg',
    '/images/barudak.jpg',
    '/images/barudak-balai.jpg',
    '/images/ngala.jpg',
    '/images/pemandangan.jpg'
  ],
  start() {
    setInterval(() => this.next(), 5000);
  },
  next() {
    this.current = (this.current + 1) % this.images.length;
  },
  prev() {
    this.current = (this.current - 1 + this.images.length) % this.images.length;
  },
  goTo(index) {
    this.current = index;
  }
}" 
x-init="start()"
>

<!-- Gambar background -->
<template x-for="(image, index) in images" :key="index">
  <div 
    x-show="current === index"
    x-transition:enter="transition-opacity duration-700"
    x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100"
    x-transition:leave="transition-opacity duration-700"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"
    class="absolute inset-0 bg-cover bg-center"
    :style="`background-image: url(${image});`"
  >
    <!-- Overlay gelap -->
    <div class="absolute inset-0 bg-black/60"></div>
  </div>
</template>

<!-- Konten hero -->
<div class="absolute inset-0 flex flex-col items-center justify-center text-center text-white z-10 space-y-4">
  <h1 class="text-5xl font-bold drop-shadow-lg">Selamat Datang di KA-Mari</h1>
  <p class="text-lg max-w-xl mx-auto">Sistem Informasi Magang dan Praktik Industri</p>
</div>

</div>

  <!-- Slides -->
  <template x-for="(img, index) in images" :key="index">
    <div 
      class="absolute top-0 left-0 w-full h-full bg-center bg-cover transition-opacity duration-1000"
      :style="`background-image:url('${img}')`"
      :class="{ 'opacity-100 z-20': current === index, 'opacity-0 z-10': current !== index }"
    ></div>
  </template>

  <!-- Hero Content -->
  <div class="relative z-30 flex items-center justify-center h-full text-white text-center px-4">
    <div class="max-w-4xl">
      <h1 class="simarin-text text-5xl md:text-7xl mb-4">
 
      </h1>
      <h2 class="program-text text-xl md:text-3xl font-bold uppercase tracking-wider mb-6">

      </h2>
      <p class="program-text text-2xl md:text-3xl font-bold italic mb-6">

      </p>
      <p class="program-text text-lg font-bold">

      </p>
    </div>
  </div>

  <!-- Dot Navigasi -->
  <div class="absolute bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-2 z-40">
    <template x-for="(img, index) in images" :key="index">
      <div @click="goTo(index)"
        class="w-3 h-3 rounded-full cursor-pointer transition-colors duration-300"
        :class="current === index ? 'bg-white w-6' : 'bg-gray-400/50'">
      </div>
    </template>
  </div>
</div>

<div class="max-w-6xl mx-auto px-4 py-12">
 <!-- ‚úÖ Flex wrapper untuk dua card utama -->
 <div class="flex flex-col md:flex-row justify-center items-start gap-8">

<!-- üü¶ Card Upload Surat Permohonan -->
<% if (!suratUploaded) { %>
  <div
  id="suratPermohonanCard"
  class="bg-gradient-to-r from-green-500 via-white-500 to-green-500 
         shadow-lg rounded-2xl p-8 flex flex-col items-center justify-between 
         w-full md:w-1/2 transition-transform duration-300 hover:scale-105 hover:shadow-2xl">
  
  <div class="flex flex-col items-center">
    <svg class="w-12 h-12 text-white mb-4" fill="none" stroke="currentColor" stroke-width="2"
      viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round"
        d="M3 8l9 6 9-6M21 8v8a2 2 0 01-2 2H5a2 2 0 01-2-2V8" />
    </svg>
    <h3 class="text-xl font-bold mb-3 text-center text-white">Upload Surat Permohonan</h3>
    <p class="text-white text-center">Langkah pertama untuk bisa daftar magang!</p>
  </div>
  <form id="uploadForm" action="/user/surat-permohonan/upload" method="POST" enctype="multipart/form-data" class="mt-6 w-full max-w-md mx-auto bg-green-50 shadow-lg rounded-3xl p-6 flex flex-col gap-4">
  
    <label for="suratPermohonan" class="text-gray-800 font-semibold text-lg">Upload Surat Permohonan (PDF)</label>
    
    <input 
      id="suratPermohonan"
      type="file" 
      name="suratPermohonan" 
      accept="application/pdf"
      class="border border-gray-300 rounded-xl p-3 w-full text-gray-800 placeholder-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-xl file:border-0 file:bg-green-400 file:text-white file:font-semibold hover:file:bg-green-500 transition-all"
      required
    >
  
    <button 
      type="submit" 
      class="bg-green-500 text-white font-bold py-3 rounded-2xl shadow hover:bg-green-600 hover:scale-105 transition-all"
    >
      Upload Sekarang
    </button>
    
  </form>  
</div>
<% } %>
<!-- üü© Card Pendaftaran Magang -->
<% if (suratUploaded && !isRegistered) { %>
  <div
  class="bg-blue-900
         shadow-xl rounded-3xl p-8 flex flex-col items-center justify-between
         w-full md:w-1/2 transition-transform duration-300 hover:scale-105 hover:shadow-2xl">

  <div class="flex flex-col items-center">
    <svg class="w-12 h-12 text-white mb-4" fill="none" stroke="currentColor" stroke-width="2"
      viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round"
        d="M12 11c0 1.105-.895 2-2 2s-2-.895-2-2 .895-2 2-2 2 .895 2 2zM6 20h12M6 4h12m-2 4H8" />
    </svg>
    <h2 class="text-xl font-bold text-white mb-3 text-center">Pendaftaran Magang</h2>
  </div>

  <a href="/user/daftar-magang"
    class="bg-white text-blue-900 font-bold rounded-2xl px-5 py-3 hover:bg-blue-50 transition w-full text-center shadow-md hover:shadow-lg">
    Daftar Sekarang
  </a>
</div>

<% } %>

<!-- üü¢ Card Form Alur Kegiatan -->
<% if (isRegistered) { %>
  <div
  class="bg-amber-400 shadow-lg rounded-3xl mt-8 w-full md:w-1/2 mx-auto flex flex-col justify-between transform transition duration-300 hover:scale-105 hover:shadow-2xl">
  
  <div class="p-6 flex flex-col items-center">
    <div class="flex justify-center mb-4">
      <svg class="w-14 h-14 text-amber-100" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round"
          d="M9 12l2 2 4-4M7 12c0-2.21 1.79-4 4-4s4 1.79 4 4-1.79 4-4 4-4-1.79-4-4zM5 20h14" />
      </svg>
    </div>
    <h2 class="text-2xl font-bold text-center text-white drop-shadow-lg">
      Form Alur Kegiatan
    </h2>
  </div>
  
  <div class="mt-6 flex justify-center pb-6">
    <a href="/user/skm"
       class="bg-white text-amber-600 font-semibold px-10 py-3 rounded-full hover:bg-white/90 hover:scale-105 transition-all shadow-md">
       Masuk
    </a>
  </div>
</div>

<% } %>

</div>
</div>

</div>

<!-- Tambahkan link Font Awesome di <head> -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <!-- Footer -->
    <footer class="bg-gradient-to-r from-[#003FA7] via-[#0055D4] to-[#002F6C] shadow-lg text-white py-10">
      <div class="max-w-6xl mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-8">
          <!-- Kolom 1: Logo dan Deskripsi -->
          <div class="flex flex-col items-center md:items-start space-y-3">
            <div class="text-center md:text-left">
              
              <!-- alamat dengan icon -->
              <div class="flex flex-col items-center justify-center mt-4">
                <!-- icon lokasi -->
                <svg xmlns="http://www.w3.org/2000/svg" 
                class="w-8 h-8 text-green-500 mb-3"  
                     fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                        d="M12 11c1.657 0 3-1.343 3-3S13.657 5 12 5 
                           9 6.343 9 8s1.343 3 3 3z" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                        d="M19.5 8c0 7.5-7.5 13.5-7.5 13.5S4.5 15.5 4.5 8a7.5 7.5 0 1115 0z" />
                </svg>
                <p class="text-base font-semibold leading-relaxed">
                  Jl. Sempur No.1, RT.01/RW.01, Sempur,<br>
                  Kecamatan Bogor Tengah, Kota Bogor,<br>
                  Jawa Barat 16129
                </p>
              </div>
            </div>
          </div>
          
          <!-- Kolom 2: Maps -->
          <div class="flex flex-col items-center space-y-4">
              <a href="https://maps.app.goo.gl/EQdDmdumvvUJmPXV8" target="_blank" class="block">
                  <img 
                      src="https://static-maps.yandex.ru/1.x/?lang=en-US&ll=106.7993,-6.5945&z=16&size=450,200&l=map&pt=106.7993,-6.5945,pm2rdm" 
                      alt="Lokasi Jl. Sempur No.1, Bogor"
                      class="rounded-lg shadow-lg mx-auto hover:opacity-90 transition"
                  >
              </a>
          </div>
          
          <!-- Kolom 3: Sosial Media -->
          <div class="flex flex-col items-center space-y-4">
              <h2 class="text-lg font-semibold mb-4">üåê Sosial Media</h2>
              <ul class="space-y-3">
                  <li>
                      <a href="https://www.facebook.com/share/1BHFuy2pmN/" target="_blank" class="flex items-center gap-3 hover:text-blue-400 transition">
                          <i class="fab fa-facebook text-xl"></i> Facebook
                      </a>
                  </li>
                  <li>
                      <a href="https://www.instagram.com/bppsdm_brpbatpp_bogor?utm_source=ig_web_button_share_sheet&igsh=MWljM2Z2Njkwc3F6Yw==" target="_blank" class="flex items-center gap-3 hover:text-pink-400 transition">
                          <i class="fab fa-instagram text-xl"></i> Instagram
                      </a>
                  </li>
                  <li>
                      <a href="https://youtube.com/@sobatpenyuluhanbogor?si=IereKOliqRdeyZbH" target="_blank" class="flex items-center gap-3 hover:text-red-500 transition">
                          <i class="fab fa-youtube text-xl"></i> YouTube
                      </a>
                  </li>
                  <li>
                    <a href="https://www.tiktok.com/@bppsdm_brpbatpp_bogor?_t=ZS-8z6vfVjSQeW&_r=1" target="_blank" class="flex items-center gap-3 hover:text-red-500 transition">
                        <i class="fab fa-tiktok text-xl"></i> Tiktok
                    </a>
                </li>
              </ul>
          </div>
      </div>
      
      <!-- Copyright -->
      <div class="border-t border-gray-700 mt-8 pt-6 text-center text-white-400 text-sm">
          ¬© 2025 SIMARIN. Seluruh hak cipta dilindungi.
      </div>
  </footer>
  </body>
</html>
<!-- Popup sukses pendaftaran -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const urlParams = new URLSearchParams(window.location.search);
    const success = urlParams.get('success');

    if (success === 'true') {
      Swal.fire({
        icon: 'success',
        title: 'Berhasil!',
        text: 'Form pendaftaran berhasil disimpan.',
        confirmButtonText: 'OK'
      }).then(() => {
        // Hapus query string agar popup tidak muncul lagi saat refresh
        window.history.replaceState({}, document.title, "/user/dashboard");
      });
    }
  });
</script>
</body>
<!-- Popup Error Generik -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const urlParams = new URLSearchParams(window.location.search);

  // Ambil error dari query string
  const error = urlParams.get('error');
  if (error) {
    Swal.fire({
      icon: 'error',
      title: 'Gagal!',
      text: decodeURIComponent(error), // menampilkan pesan apapun dari backend
      confirmButtonText: 'OK'
    }).then(() => {
      // Hapus query string agar popup tidak muncul lagi saat refresh
      window.history.replaceState({}, document.title, "/user/dashboard");
    });
  }
});
</script>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
document.getElementById('uploadForm').addEventListener('submit', async function(e) {
  e.preventDefault();

  const formData = new FormData(this);

  try {
    const res = await fetch('/user/surat/upload', {
  method: 'POST',
  body: formData
});


    const data = await res.json();
    console.log(data);

    if (res.ok && data.success) {
      Swal.fire({
  icon: 'success',
  title: 'Berhasil!',
  text: data.message || 'Surat permohonan berhasil diupload.',
  showConfirmButton: false,
  timer: 2000
}).then(() => {
  // üîÅ Reload atau redirect ke dashboard agar status terbaru muncul
  window.location.href = '/user/dashboard?success=true';
});

    } else {
      Swal.fire({
        icon: 'error',
        title: 'Gagal!',
        text: data.message || 'Terjadi kesalahan saat upload.',
      });
    }

  } catch (error) {
    console.error(error);
    Swal.fire({
      icon: 'error',
      title: 'Kesalahan!',
      text: 'Terjadi error saat mengirim data ke server.',
    });
  }
});
document.addEventListener('DOMContentLoaded', () => {
  let lastScrollTop = 0;
  const nav = document.getElementById('mainNav');

  window.addEventListener('scroll', () => {
    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

    // Hilangkan nav saat scroll ke bawah
    if (scrollTop > lastScrollTop && scrollTop > 100) {
      nav.style.transform = 'translateY(-100%)';
    } else {
      nav.style.transform = 'translateY(0)';
    }
    lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;

  });
});

</script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const nav = document.getElementById('mainNav');
    if (!nav) return; // jika navbar ga ada, jangan lanjut
  
    let lastScrollTop = 0;
  
    window.addEventListener('scroll', () => {
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
  
      // üîπ Hide navbar saat scroll ke bawah
      if (scrollTop > lastScrollTop && scrollTop > 100) {
        nav.style.transform = 'translateY(-100%)';
      } else {
        nav.style.transform = 'translateY(0)';
      }
      lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
  
    
    });
  });
  </script>
  
  <style>
  #mainNav {
    transition: transform 0.3s ease, background-color 0.3s ease, box-shadow 0.3s ease;
  }
  </style>
  