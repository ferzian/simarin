<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>KA'MARI - Pendaftaran Layanan</title>
<script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdn.tailwindcss.com"></script>
<script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
<script src="/js/user/user-dashboard.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    .simarin-text {
      font-family: 'Bebas Neue', sans-serif;
      letter-spacing: 0.2rem;
    }
    .program-text {
      font-family: 'Poppins', sans-serif;
    }
    .service-card {
      transition: all 0.3s ease;
      border-bottom: 4px solid transparent;
    }
    .service-card:hover {
      transform: translateY(-5px);
      border-bottom-color: #f59e0b;
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>
<body class="bg-gray-50">

<!-- Navigation -->
<nav class="bg-gradient-to-r from-[#003FA7] via-[#0055D4] to-[#002F6C] shadow-lg text-white">
    <div class="max-w-6xl mx-auto px-4 py-3 flex justify-between items-center">
      
      <!-- Kiri: Logo + SIMARIN -->
      <div class="flex items-center space-x-3">
        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhVlnwerlS3bGvBZeB4BNCQnl1bHvwBAkKO3NY2yf0isvrN2egSPM_VT7rkEV3lJBYXaFmJvprDlU5Xr2kZTK564YnUhX_SWuPmRYiaDoYItCcFhhnBrf3QcdJ-qNn31JV5Zfgaoz7fWIViBz6KwvnGp39roEqCWOI6m8lbuBtSzYe9RHFq-8WAVA/s3000/Kementerian%20Kelautan%20dan%20Perikanan%20(KKP)%20Republik%20Indonesia.png" alt="Logo SIMARIN" class="h-12 w-auto" />
        <span class="simarin-text text-4xl text-white">KA'MARI</span>
      </div>
      
      <!-- Kanan: Menu Navigasi -->
      <div class="flex space-x-8">
          <a href="/user/dashboard" class="text-white font-semibold py-2 text-xl">Beranda</a>

          <!-- Layanan dengan dropdown -->
          <div x-data="{ open: false }" class="relative inline-flex items-center">
            <button @click="open = !open" class="text-white font-semibold py-2 text-xl focus:outline-none">
              Layanan
            </button>
            <div x-show="open" @click.away="open = false"
                 class="absolute top-full mt-2 w-40 bg-white rounded shadow-lg py-2 z-50"
                 x-transition>
              <a href="/user/daftar-magang" class="flex items-center gap-2 px-4 py-2 text-gray-800 hover:bg-gray-100">
                Daftar Magang
                <% if (isRegistered) { %>  
             <a href="/user/SKM" class="flex items-center gap-2 px-4 py-2 text-gray-800 hover:bg-gray-100">
                 SKM
                 <% } %>
              </a>
            </div>
          </div>
    
          <!-- Kontak dengan dropdown -->
          <div x-data="{ open: false }" class="relative inline-flex items-center">
            <button @click="open = !open" class="text-white font-semibold py-2 text-xl focus:outline-none">
              Kontak
            </button>
            <div x-show="open" @click.away="open = false"
                 class="absolute top-full mt-2 w-40 bg-white rounded shadow-lg py-2 z-50"
                 x-transition>
                 <a href="https://www.instagram.com/bppsdm_brpbatpp_bogor" target="_blank"
                 class="flex items-center gap-2 px-4 py-2 text-gray-800 hover:bg-gray-100">
                <!-- Ikon Instagram -->
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                     stroke-width="1.5" stroke="currentColor"
                     class="w-5 h-5 text-pink-600">
                  <path stroke-linecap="round" stroke-linejoin="round"
                        d="M2.25 6.75C2.25 4.679 3.929 3 6 3h12c2.071 0 3.75 1.679 3.75 3.75v12c0 2.071-1.679 3.75-3.75 3.75H6A3.75 3.75 0 0 1 2.25 18.75v-12zM16.5 10.5a4.5 4.5 0 1 0-9 0 4.5 4.5 0 0 0 9 0zM17.25 6.75h.008v.008h-.008V6.75z"/>
                </svg>
                <span class="text-base font-semibold">instagram</span>
              </a>
              
            </div>
          </div>
        
          <div class="relative inline-block text-left" x-data="{ open: false }">
            <!-- Tombol Hamburger -->
            <button @click="open = !open" class="p-2 text-white hover:text-blue-600 focus:outline-none">
              <svg class="w-7 h-7" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
              </svg>
            </button>
      
              <!-- Dropdown Menu --> 
            <div x-show="open" @click.outside="open = false"
                 x-transition
                 class="absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50">
                 <a href="/user/profil" class="flex items-center px-4 py-2 text-base text-gray-700 hover:bg-gray-100">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A9 9 0 1112 21v-6.063a3 3 0 100-6V3a9 9 0 00-6.879 14.804z" />
                  </svg>
                  Profil
                </a> 
              <button onclick="confirmLogout()" class="block w-full text-left px-4 py-2 text-red-600 hover:bg-gray-100">
                Logout
              </button>
              
              </form>
            </div>
          </div>
        </div>
     </nav>
  
<!-- Hero Section -->
<div 
  class="relative w-full h-[90vh] overflow-hidden" 
  x-data="{
    current: 0,
    images: [
      '/images/BRPBATPP_Depan[1].jpg',
      'https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
      'https://images.unsplash.com/photo-1434030216411-0b793f4b4173?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80'
    ],
    start() {
      setInterval(() => {
        this.next();
      }, 5000);
    },
    next() {
      this.current = (this.current + 1) % this.images.length;
    },
    prev() {
      this.current = (this.current - 1 + this.images.length) % this.images.length;
    },
    goTo(index) {
      this.current = index;
    }
  }" 
  x-init="start()"
>
  <!-- Slides -->
  <template x-for="(img, index) in images" :key="index">
    <div 
      class="absolute top-0 left-0 w-full h-full bg-center bg-cover transition-opacity duration-1000"
      :style="`background-image:url('${img}')`"
      :class="{ 'opacity-100 z-20': current === index, 'opacity-0 z-10': current !== index }"
    ></div>
  </template>

  <!-- Hero Content -->
  <div class="relative z-30 flex items-center justify-center h-full text-white text-center px-4">
    <div class="max-w-4xl">
      <h1 class="simarin-text text-5xl md:text-7xl mb-4">
        Sistem Informasi Magang dan Praktik Industri
      </h1>
      <h2 class="program-text text-xl md:text-3xl font-bold uppercase tracking-wider mb-6">
        PENDAFTARAN LAYANAN
      </h2>
      <p class="program-text text-2xl md:text-3xl font-bold italic mb-6">
        MAGANG / PRAKTIK LAPANG / PENELITIAN
      </p>
      <p class="program-text text-lg font-bold">
        #SIMARIN
      </p>
    </div>
  </div>

  <!-- Tombol Sebelumnya -->
  <button @click="prev"
    class="absolute left-4 top-1/2 transform -translate-y-1/2 text-white bg-black/50 p-3 rounded-full shadow-lg border border-white/20 hover:bg-black/80 hover:scale-105 transition-all duration-200 z-40">
    <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 font-bold" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
    </svg>
  </button>

  <!-- Tombol Selanjutnya -->
  <button @click="next"
    class="absolute right-4 top-1/2 transform -translate-y-1/2 text-white bg-black/50 p-3 rounded-full shadow-lg border border-white/20 hover:bg-black/80 hover:scale-105 transition-all duration-200 z-40">
    <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 font-bold" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
    </svg>
  </button>

  <!-- Dot Navigasi -->
  <div class="absolute bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-2 z-40">
    <template x-for="(img, index) in images" :key="index">
      <div @click="goTo(index)"
        class="w-3 h-3 rounded-full cursor-pointer transition-colors duration-300"
        :class="current === index ? 'bg-white w-6' : 'bg-gray-400/50'">
      </div>
    </template>
  </div>
</div>

<div class="max-w-6xl mx-auto px-4 py-12">
 <!-- ✅ Flex wrapper untuk dua card utama -->
 <div class="flex flex-col md:flex-row justify-center items-start gap-8">

<!-- 🟦 Card Upload Surat Permohonan -->
<div
  class="bg-white shadow-md rounded-2xl p-8 flex flex-col items-center justify-between w-full md:w-1/2 transition-transform duration-300 hover:scale-105 hover:shadow-2xl">
  <div class="flex flex-col items-center">
    <svg class="w-12 h-12 text--600 mb-4" fill="none" stroke="currentColor" stroke-width="2"
      viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round"
        d="M3 8l9 6 9-6M21 8v8a2 2 0 01-2 2H5a2 2 0 01-2-2V8" />
    </svg>
    <h3 class="text-xl font-bold mb-3 text-center text-gray-800">Upload Surat Permohonan</h3>
  </div>

  <form id="uploadForm" action="/user/upload" method="POST" enctype="multipart/form-data" class="flex flex-col gap-3 w-full">
    <input type="file" name="surat_permohonan" accept=".pdf" required
      class="border rounded-lg p-2 w-full focus:ring-2 focus:ring-blue-500 outline-none">
    <button type="submit"
      class="bg-blue-600 text-white rounded-lg px-4 py-2 hover:bg-blue-700 shadow-lg hover:shadow-2xl hover:scale-[1.03] transition w-full">Upload</button>
  </form>
  
</div>

<!-- 🟩 Card Pendaftaran Magang -->
<div
  class="bg-white shadow-md rounded-2xl p-8 flex flex-col items-center justify-between w-full md:w-1/2 transition-transform duration-300 hover:scale-105 hover:shadow-2xl">
  <div class="flex flex-col items-center">
    <svg class="w-12 h-12 text-yellow-500 mb-4" fill="none" stroke="currentColor" stroke-width="2"
      viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round"
        d="M12 11c0 1.105-.895 2-2 2s-2-.895-2-2 .895-2 2-2 2 .895 2 2zM6 20h12M6 4h12m-2 4H8" />
    </svg>
    <h2 class="text-xl font-bold text-gray-800 mb-3 text-center">Pendaftaran Magang</h2>
  </div>

  <a href="/user/daftar-magang"
    class="bg-yellow-500 text-white rounded-lg px-4 py-2 hover:bg-yellow-700 transition w-full text-center">Daftar
    Sekarang</a>
</div>

<% if (isRegistered) { %>
<!-- 🟢 Card Form Alur Kegiatan -->
<div
  class="bg-white p-6 rounded-2xl shadow-md mt-8 w-full md:w-1/2 mx-auto flex flex-col justify-between transform transition duration-300 hover:scale-105 hover:shadow-2xl">
  <div>
    <div class="flex justify-center mb-4">
      <svg class="w-14 h-14 text-green-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round"
          d="M9 12l2 2 4-4M7 12c0-2.21 1.79-4 4-4s4 1.79 4 4-1.79 4-4 4-4-1.79-4-4zM5 20h14" />
      </svg>
    </div>
    <h2 class="text-xl font-bold text-center text-gray-800">
      Form Alur Kegiatan
    </h2>
  </div>
  <div class="mt-6 flex justify-center">
    <a href="/user/skm"
      class="bg-green-600 text-white px-10 py-2 rounded-full hover:bg-green-700 transition">Silahkan isi</a>
  </div>
</div>
<% } %>

</div>
</div>

</div>

<!-- Tambahkan link Font Awesome di <head> -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <!-- Footer -->
    <footer class="bg-gradient-to-r from-[#003FA7] via-[#0055D4] to-[#002F6C] shadow-lg text-white py-10">
      <div class="max-w-6xl mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-8">
          <!-- Kolom 1: Logo dan Deskripsi -->
          <div class="flex flex-col items-center md:items-start space-y-3">
            <div class="text-center md:text-left">
              
              <!-- alamat dengan icon -->
              <div class="flex flex-col items-center justify-center mt-4">
                <!-- icon lokasi -->
                <svg xmlns="http://www.w3.org/2000/svg" 
                class="w-8 h-8 text-blue-500 mb-3"  
                     fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                        d="M12 11c1.657 0 3-1.343 3-3S13.657 5 12 5 
                           9 6.343 9 8s1.343 3 3 3z" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                        d="M19.5 8c0 7.5-7.5 13.5-7.5 13.5S4.5 15.5 4.5 8a7.5 7.5 0 1115 0z" />
                </svg>
                <p class="text-base font-semibold leading-relaxed">
                  Jl. Sempur No.1, RT.01/RW.01, Sempur,<br>
                  Kecamatan Bogor Tengah, Kota Bogor,<br>
                  Jawa Barat 16129
                </p>
              </div>
            </div>
          </div>
          
          <!-- Kolom 2: Maps -->
          <div class="flex flex-col items-center space-y-4">
              <a href="https://maps.app.goo.gl/EQdDmdumvvUJmPXV8" target="_blank" class="block">
                  <img 
                      src="https://static-maps.yandex.ru/1.x/?lang=en-US&ll=106.7993,-6.5945&z=16&size=450,200&l=map&pt=106.7993,-6.5945,pm2rdm" 
                      alt="Lokasi Jl. Sempur No.1, Bogor"
                      class="rounded-lg shadow-lg mx-auto hover:opacity-90 transition"
                  >
              </a>
          </div>
          
          <!-- Kolom 3: Sosial Media -->
          <div class="flex flex-col items-center space-y-4">
              <h2 class="text-lg font-semibold mb-4">🌐 Sosial Media</h2>
              <ul class="space-y-3">
                  <li>
                      <a href="https://www.facebook.com/share/1BHFuy2pmN/" target="_blank" class="flex items-center gap-3 hover:text-blue-400 transition">
                          <i class="fab fa-facebook text-xl"></i> Facebook
                      </a>
                  </li>
                  <li>
                      <a href="https://www.instagram.com/bppsdm_brpbatpp_bogor?utm_source=ig_web_button_share_sheet&igsh=MWljM2Z2Njkwc3F6Yw==" target="_blank" class="flex items-center gap-3 hover:text-pink-400 transition">
                          <i class="fab fa-instagram text-xl"></i> Instagram
                      </a>
                  </li>
                  <li>
                      <a href="https://youtube.com/@sobatpenyuluhanbogor?si=IereKOliqRdeyZbH" target="_blank" class="flex items-center gap-3 hover:text-red-500 transition">
                          <i class="fab fa-youtube text-xl"></i> YouTube
                      </a>
                  </li>
                  <li>
                    <a href="https://www.tiktok.com/@bppsdm_brpbatpp_bogor?_t=ZS-8z6vfVjSQeW&_r=1" target="_blank" class="flex items-center gap-3 hover:text-red-500 transition">
                        <i class="fab fa-tiktok text-xl"></i> Tiktok
                    </a>
                </li>
              </ul>
          </div>
      </div>
      
      <!-- Copyright -->
      <div class="border-t border-gray-700 mt-8 pt-6 text-center text-white-400 text-sm">
          © 2025 SIMARIN. Seluruh hak cipta dilindungi.
      </div>
  </footer>
  </body>
</html>
<body>
<!-- Popup sukses pendaftaran -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const urlParams = new URLSearchParams(window.location.search);
    const success = urlParams.get('success');

    if (success === 'true') {
      Swal.fire({
        icon: 'success',
        title: 'Berhasil!',
        text: 'Form pendaftaran berhasil disimpan.',
        confirmButtonText: 'OK'
      }).then(() => {
        // Hapus query string agar popup tidak muncul lagi saat refresh
        window.history.replaceState({}, document.title, "/user/dashboard");
      });
    }
  });
</script>
</body>
<!-- Popup Error Generik -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const urlParams = new URLSearchParams(window.location.search);

  // Ambil error dari query string
  const error = urlParams.get('error');
  if (error) {
    Swal.fire({
      icon: 'error',
      title: 'Gagal!',
      text: decodeURIComponent(error), // menampilkan pesan apapun dari backend
      confirmButtonText: 'OK'
    }).then(() => {
      // Hapus query string agar popup tidak muncul lagi saat refresh
      window.history.replaceState({}, document.title, "/user/dashboard");
    });
  }
});
</script>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
document.getElementById('uploadForm').addEventListener('submit', async function(e) {
  e.preventDefault();

  const formData = new FormData(this);

  const res = await fetch('/user/upload', {
    method: 'POST',
    body: formData
  });

  const data = await res.json();
  console.log(data);

  if (data.success) {
    Swal.fire({
      icon: 'success',
      title: 'Berhasil!',
      text: data.message,
      showConfirmButton: false,
      timer: 2000
    }).then(() => {
      window.location.href = '/user/user-dashboard'; // arahkan ke halaman lain
    });
  } else {
    Swal.fire({
      icon: 'error',
      title: 'Gagal!',
      text: data.message,
    });
  }
});
</script>