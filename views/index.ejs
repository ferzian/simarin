<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KA-MARI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/css/home.css" />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="icon" sizes="32x32" type="image/png" href="/images/logo.png" />
    <style>
      body {
        font-family: "Poppins", sans-serif;
      }
    </style>
  </head>
  <body id="top" class="min-h-screen flex flex-col">
    <nav
      id="navbar"
      class="fixed top-0 left-0 right-0 bg-transparent p-5 flex justify-between items-center z-50 transition duration-300"
    >
      <div class="flex items-center space-x-3">
        <img
          src="/images/logo.png"
          alt="Logo KA-MARI"
          class="h-10 w-10 object-contain"
        />
        <h1
          id="navTitle"
          class="text-2xl md:text-3xl font-bold text-white tracking-wide"
        >
          KA-MARI
        </h1>
      </div>
      <div class="flex items-center space-x-6 font-medium">
        <a
          href="#top"
          class="nav-link text-white hover:text-blue-400 transition"
          >Beranda</a
        >
        <a
          href="/register"
          class="px-5 py-2 rounded-full bg-gradient-to-r from-blue-600 to-blue-500 text-white shadow hover:opacity-90 transition"
          >Daftar</a
        >
        <a
          href="/login"
          class="nav-link text-white hover:text-blue-400 transition"
          >Login</a
        >
      </div>
    </nav>

    <!-- Overlay agar teks terbaca -->
    <div class="absolute inset-0 bg-black/50"></div>

    <!-- Hero dengan background image -->
    <header
      class="relative h-screen flex items-center justify-center text-center bg-cover bg-center"
      style="background-image: url('/images/BRPBATPP_Depan[1].jpg')"
    >
      <!-- overlay -->
      <div class="absolute inset-0 bg-black/40"></div>

      <!-- konten -->
      <div class="relative z-10 text-white px-6">
        <h2 class="text-5xl md:text-6xl font-extrabold mb-6 leading-tight">
          Wujudkan Potensimu bersama <span class="text-blue-400">KA-MARI</span>
        </h2>
        <p class="text-lg md:text-xl max-w-2xl mx-auto mb-8 opacity-90">
          Sistem Informasi untuk mendukung program Magang, Praktik Kegiatan
          Lapang, dan Penelitian.
        </p>
        <div class="space-x-4">
          <a
            href="/register"
            class="bg-gradient-to-r from-blue-600 to-blue-500 text-white text-lg font-semibold px-8 py-3 rounded-full shadow-lg hover:opacity-90 transition"
          >
            Daftar Sekarang
          </a>
          <a
            href="#tentang"
            class="bg-white text-blue-700 text-lg font-semibold px-8 py-3 rounded-full shadow-md hover:bg-gray-100 transition"
          >
            Pelajari Lebih Lanjut
          </a>
        </div>
      </div>
    </header>

    <!-- Tentang -->
    <section id="tentang" class="bg-white py-20 px-6">
      <div class="max-w-6xl mx-auto text-center">
        <h3 class="text-4xl font-bold text-gray-800 mb-6">Tentang KA-MARI</h3>
        <p
          class="text-gray-600 max-w-3xl mx-auto mb-12 text-lg leading-relaxed"
        >
          KA-MARI dirancang khusus untuk memudahkan proses pendaftaran dan
          pengelolaan program magang. Kami hadir untuk memberikan pengalaman
          berharga yang mempersiapkan Anda menghadapi dunia kerja.
        </p>
        <div class="grid md:grid-cols-3 gap-8">
          <div
            class="p-6 bg-gray-50 rounded-xl shadow hover:shadow-lg transition"
          >
            <div
              class="w-12 h-12 flex items-center justify-center rounded-full bg-blue-100 text-blue-600 mb-4"
            >
              <i class="fas fa-file-alt text-2xl"></i>
            </div>
            <h4 class="text-xl font-semibold mb-2">Pendaftaran Mudah</h4>
            <p class="text-gray-600">
              Daftar akun dengan cepat dan mulai proses seleksi tanpa ribet.
            </p>
          </div>
          <div
            class="p-6 bg-gray-50 rounded-xl shadow hover:shadow-lg transition"
          >
            <div
              class="w-12 h-12 flex items-center justify-center rounded-full bg-blue-100 text-blue-600 mb-4"
            >
              <i class="fas fa-chart-line text-2xl"></i>
            </div>
            <h4 class="text-xl font-semibold mb-2">Dashboard Interaktif</h4>
            <p class="text-gray-600">
              Kelola informasi magang dan pantau progres Anda melalui dashboard.
            </p>
          </div>
          <div
            class="p-6 bg-gray-50 rounded-xl shadow hover:shadow-lg transition"
          >
            <div
              class="w-12 h-12 flex items-center justify-center rounded-full bg-blue-100 text-blue-600 mb-4"
            >
              <i class="fas fa-graduation-cap text-2xl"></i>
            </div>
            <h4 class="text-xl font-semibold mb-2">Program Berkualitas</h4>
            <p class="text-gray-600">
              Dapatkan pengalaman praktis di bidang perikanan budidaya air tawar
              dan penyuluhan.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Alur Kegiatan -->
    <section id="alur" class="bg-gray-50 py-20 px-6">
      <div class="max-w-6xl mx-auto text-center">
        <h3 class="text-4xl font-bold text-gray-800 mb-6">
          Alur Kegiatan Magang/Praktik
        </h3>
        <p
          class="text-gray-600 max-w-3xl mx-auto mb-12 text-lg leading-relaxed"
        >
          Berikut adalah alur permohonan kegiatan serta alur yang harus
          dilaksanakan setelah kegiatan selesai.
        </p>

        <div class="grid grid-cols-1 gap-10">
          <!-- Alur Permohonan -->
          <div
            class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition flex flex-col items-center"
          >
            <h4 class="text-2xl font-semibold text-blue-700 mb-4">
              Alur Permohonan
            </h4>
            <img
              src="/images/alurMulai.png"
              alt="Alur Permohonan Magang/Praktik"
              class="rounded-lg shadow-md hover:scale-105 transition duration-300 w-full max-w-5xl"
            />
          </div>

          <!-- Alur Selesai -->
          <div
            class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition flex flex-col items-center"
          >
            <h4 class="text-2xl font-semibold text-blue-700 mb-4">
              Alur Setelah Kegiatan
            </h4>
            <img
              src="/images/alurSelesai.png"
              alt="Alur Selesai Kegiatan Magang/Praktik"
              class="rounded-lg shadow-md hover:scale-105 transition duration-300 w-full max-w-5xl"
            />
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-10">
      <div class="max-w-6xl mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-8">
        <!-- Kolom 1: Logo dan Deskripsi -->
        <div class="flex flex-col items-center md:items-start space-y-3">
          <div class="text-center md:text-left">
            <!-- alamat dengan icon -->
            <div class="flex flex-col items-center justify-center mt-4">
              <!-- icon lokasi -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="w-8 h-8 text-blue-500 mb-3"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 11c1.657 0 3-1.343 3-3S13.657 5 12 5 
                           9 6.343 9 8s1.343 3 3 3z"
                />
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19.5 8c0 7.5-7.5 13.5-7.5 13.5S4.5 15.5 4.5 8a7.5 7.5 0 1115 0z"
                />
              </svg>
              <p class="text-base font-semibold leading-relaxed">
                Jl. Sempur No.1, RT.01/RW.01, Sempur,<br />
                Kecamatan Bogor Tengah, Kota Bogor,<br />
                Jawa Barat 16129
              </p>
            </div>
          </div>
        </div>

        <!-- Kolom 2: Maps -->
        <div class="flex flex-col items-center space-y-4">
          <a
            href="https://maps.app.goo.gl/EQdDmdumvvUJmPXV8"
            target="_blank"
            class="block"
          >
            <img
              src="https://static-maps.yandex.ru/1.x/?lang=en-US&ll=106.7993,-6.5945&z=16&size=450,200&l=map&pt=106.7993,-6.5945,pm2rdm"
              alt="Lokasi Jl. Sempur No.1, Bogor"
              class="rounded-lg shadow-lg mx-auto hover:opacity-90 transition"
            />
          </a>
        </div>

        <!-- Kolom 3: Sosial Media -->
        <div class="flex flex-col items-center space-y-4">
          <h2 class="text-lg font-semibold mb-4">üåê Sosial Media</h2>
          <ul class="space-y-3">
            <li>
              <a
                href="https://www.facebook.com/share/1BHFuy2pmN/"
                target="_blank"
                class="flex items-center gap-3 hover:text-blue-400 transition"
              >
                <i class="fab fa-facebook text-xl"></i> Facebook
              </a>
            </li>
            <li>
              <a
                href="https://www.instagram.com/bppsdm_brpbatpp_bogor?utm_source=ig_web_button_share_sheet&igsh=MWljM2Z2Njkwc3F6Yw=="
                target="_blank"
                class="flex items-center gap-3 hover:text-pink-400 transition"
              >
                <i class="fab fa-instagram text-xl"></i> Instagram
              </a>
            </li>
            <li>
              <a
                href="https://youtube.com/@sobatpenyuluhanbogor?si=IereKOliqRdeyZbH"
                target="_blank"
                class="flex items-center gap-3 hover:text-red-500 transition"
              >
                <i class="fab fa-youtube text-xl"></i> YouTube
              </a>
            </li>
            <li>
              <a
                href="https://www.tiktok.com/@bppsdm_brpbatpp_bogor?_t=ZS-8z6vfVjSQeW&_r=1"
                target="_blank"
                class="flex items-center gap-3 hover:text-red-500 transition"
              >
                <i class="fab fa-tiktok text-xl"></i> Tiktok
              </a>
            </li>
          </ul>
        </div>
      </div>

      <!-- Copyright -->
      <div
        class="border-t border-gray-700 mt-8 pt-6 text-center text-gray-400 text-sm"
      >
        ¬© 2025 SIMARIN. Seluruh hak cipta dilindungi.
      </div>
    </footer>

    <!-- Floating Chatbot Button (BESAR) -->
    <button
      id="chatbotToggle"
      class="fixed bottom-6 right-6 w-14 h-14 md:w-16 md:h-16 rounded-full bg-blue-600 hover:bg-blue-700 text-white shadow-lg flex items-center justify-center transition z-50"
      aria-label="Buka Chatbot"
    >
      <i class="fa-solid fa-comments text-2xl md:text-3xl"></i>
    </button>

    <!-- Chatbot Box -->
    <div
      id="chatbotBox"
      class="hidden fixed bottom-24 right-6 w-80 sm:w-96 bg-white shadow-2xl rounded-2xl overflow-hidden flex flex-col z-50"
    >
      <!-- Header -->
      <div
        class="bg-blue-600 text-white px-4 py-3 flex items-center justify-between"
      >
        <span class="font-semibold">Jerabats</span>
        <button
          id="closeChatbot"
          class="hover:text-gray-200"
          aria-label="Tutup"
        >
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>

      <!-- Chat Area -->
      <div
        id="chatArea"
        class="flex-1 p-4 space-y-3 overflow-y-auto overflow-x-hidden max-h-[28rem] text-sm break-words"
      >
        <div class="text-gray-500 text-center">
          Hallo! nama saya Jerabats üëã
        </div>
      </div>

      <!-- Input -->
      <div class="border-t p-3 flex gap-2">
        <input
          id="chatInput"
          type="text"
          placeholder="Tulis pesan..."
          class="flex-1 border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring focus:ring-blue-300"
        />
        <button
          id="sendBtn"
          class="bg-blue-600 text-white px-4 rounded-lg hover:bg-blue-700"
        >
          <i class="fa-solid fa-paper-plane"></i>
        </button>
      </div>
    </div>

    <!-- Navbar Scroll Effect -->
    <script>
      const navbar = document.getElementById("navbar");
      const navTitle = document.getElementById("navTitle");
      const navLinks = document.querySelectorAll(".nav-link");

      window.addEventListener("scroll", () => {
        if (window.scrollY > 50) {
          navbar.classList.add("bg-white", "shadow");
          navTitle.classList.remove("text-white");
          navTitle.classList.add("text-blue-700");
          navLinks.forEach((link) => {
            link.classList.remove("text-white");
            link.classList.add("text-gray-700");
          });
        } else {
          navbar.classList.remove("bg-white", "shadow");
          navTitle.classList.remove("text-blue-700");
          navTitle.classList.add("text-white");
          navLinks.forEach((link) => {
            link.classList.remove("text-gray-700");
            link.classList.add("text-white");
          });
        }
      });
    </script>

    <script>
      const chatbotToggle = document.getElementById("chatbotToggle");
      const chatbotBox = document.getElementById("chatbotBox");
      const closeChatbot = document.getElementById("closeChatbot");
      const sendBtn = document.getElementById("sendBtn");
      const chatInput = document.getElementById("chatInput");
      const chatArea = document.getElementById("chatArea");

      // üîó Ganti ini dengan URL chatbot temanmu
      const API_URL = "/chat";

      // Toggle
      chatbotToggle.addEventListener("click", () => {
        chatbotBox.classList.toggle("hidden");
        if (!chatbotBox.classList.contains("hidden")) {
          setTimeout(() => chatInput.focus(), 50);
        }
      });
      closeChatbot.addEventListener("click", () =>
        chatbotBox.classList.add("hidden")
      );

      // Utility: tambah pesan (dengan auto-wrap & max width)
      function addMessage(text, sender = "user") {
        const wrap = document.createElement("div");
        wrap.className =
          sender === "user" ? "flex justify-end" : "flex justify-start";

        const bubble = document.createElement("div");
        bubble.className = `
      px-3 py-2 rounded-2xl text-sm sm:text-[0.95rem]
      whitespace-pre-wrap break-words [overflow-wrap:anywhere]
      max-w-[85%]
      ${
        sender === "user"
          ? "bg-blue-600 text-white"
          : "bg-gray-200 text-gray-800"
      }
    `;
        bubble.textContent = text;

        wrap.appendChild(bubble);
        chatArea.appendChild(wrap);
        chatArea.scrollTop = chatArea.scrollHeight;
      }

      // Kirim pesan ke API
      async function sendMessage() {
        const message = chatInput.value.trim();
        if (!message) return;

        addMessage(message, "user");
        chatInput.value = "";

        // indikator simple
        const loading = document.createElement("div");
        loading.className = "flex justify-start";
        loading.innerHTML = `<div class="bg-gray-200 text-gray-800 px-3 py-2 rounded-2xl text-sm max-w-[85%]">Mengetik‚Ä¶</div>`;
        chatArea.appendChild(loading);
        chatArea.scrollTop = chatArea.scrollHeight;

        try {
          const res = await fetch(API_URL, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ message: message }),
          });
          const data = await res.json();
          loading.remove();
          addMessage(data.data?.response || "Maaf, ada kesalahan.", "bot");
        } catch (err) {
          console.error(err);
          loading.remove();
          addMessage("‚ö†Ô∏è Tidak bisa terhubung ke server.", "bot");
        }
      }

      sendBtn.addEventListener("click", sendMessage);
      chatInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          e.preventDefault();
          sendMessage();
        }
      });
    </script>
  </body>
</html>
